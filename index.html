<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sky Drifter</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #1a1a2e;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #game {
            display: block;
            background: linear-gradient(#16213e, #1a1a2e);
        }
        #ui {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #ffd700;
            font-size: 24px;
            font-weight: bold;
            z-index: 10;
        }
        #menu {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 20;
        }
        #menu.hidden { display: none; }
        #menu h1 {
            color: #4ecdc4;
            font-size: 48px;
            margin-bottom: 20px;
        }
        #menu p {
            color: #aaa;
            margin-bottom: 30px;
        }
        #menu button {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 20px;
            border-radius: 30px;
            cursor: pointer;
        }
        #menu button:hover { background: #ff5252; }
        #finalScore {
            color: #ffd700;
            font-size: 64px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <canvas id="game"></canvas>
    <div id="ui">Score: <span id="score">0</span></div>
    
    <div id="menu">
        <h1 id="menuTitle">Sky Drifter</h1>
        <p id="menuText">Use ↑↓ or W/S keys to fly. Collect stars, avoid clouds!</p>
        <button id="startBtn">Play</button>
    </div>

    <script>
    (function() {
        // Canvas setup
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        
        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resize();
        window.addEventListener('resize', resize);

        // Game state
        let playing = false;
        let score = 0;
        let speed = 3;
        
        // Player plane
        let plane = { x: 120, y: 300, vy: 0 };
        
        // Objects
        let clouds = [];
        let stars = [];
        
        // Controls
        let up = false, down = false;
        
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowUp' || e.key === 'w') up = true;
            if (e.key === 'ArrowDown' || e.key === 's') down = true;
        });
        
        document.addEventListener('keyup', function(e) {
            if (e.key === 'ArrowUp' || e.key === 'w') up = false;
            if (e.key === 'ArrowDown' || e.key === 's') down = false;
        });

        // Start button
        document.getElementById('startBtn').onclick = function() {
            playing = true;
            score = 0;
            speed = 3;
            plane = { x: 120, y: canvas.height / 2, vy: 0 };
            clouds = [];
            stars = [];
            document.getElementById('score').textContent = '0';
            document.getElementById('menu').classList.add('hidden');
        };

        // Spawn timers
        let lastCloud = 0;
        let lastStar = 0;

        // Main loop
        function loop(time) {
            // Clear screen
            ctx.fillStyle = '#16213e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            if (playing) {
                // Spawn clouds
                if (time - lastCloud > 2000) {
                    clouds.push({
                        x: canvas.width + 50,
                        y: Math.random() * (canvas.height - 100) + 50,
                        w: 80,
                        h: 50
                    });
                    lastCloud = time;
                }
                
                // Spawn stars
                if (time - lastStar > 1500) {
                    stars.push({
                        x: canvas.width + 20,
                        y: Math.random() * (canvas.height - 100) + 50
                    });
                    lastStar = time;
                }
                
                // Update plane
                if (up) plane.vy -= 0.5;
                if (down) plane.vy += 0.5;
                plane.vy += 0.2; // gravity
                plane.vy *= 0.95; // drag
                plane.y += plane.vy;
                
                // Bounds
                if (plane.y < 30) { plane.y = 30; plane.vy = 0; }
                if (plane.y > canvas.height - 30) { plane.y = canvas.height - 30; plane.vy = 0; }
                
                // Update clouds
                for (let i = clouds.length - 1; i >= 0; i--) {
                    clouds[i].x -= speed;
                    if (clouds[i].x < -100) clouds.splice(i, 1);
                }
                
                // Update stars
                for (let i = stars.length - 1; i >= 0; i--) {
                    stars[i].x -= speed + 1;
                    if (stars[i].x < -20) stars.splice(i, 1);
                }
                
                // Draw clouds (white rectangles for simplicity)
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                for (let c of clouds) {
                    ctx.beginPath();
                    ctx.arc(c.x, c.y, 25, 0, Math.PI * 2);
                    ctx.arc(c.x + 25, c.y - 10, 30, 0, Math.PI * 2);
                    ctx.arc(c.x + 50, c.y, 25, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                // Draw stars
                ctx.fillStyle = '#ffd700';
                for (let s of stars) {
                    ctx.beginPath();
                    ctx.arc(s.x, s.y, 12, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                // Draw plane (simple triangle/shape)
                ctx.save();
                ctx.translate(plane.x, plane.y);
                ctx.rotate(plane.vy * 0.05);
                
                // Body
                ctx.fillStyle = '#e0e0e0';
                ctx.fillRect(-35, -8, 70, 16);
                
                // Nose
                ctx.beginPath();
                ctx.moveTo(35, -8);
                ctx.lineTo(50, 0);
                ctx.lineTo(35, 8);
                ctx.fill();
                
                // Wings
                ctx.fillStyle = '#4ecdc4';
                ctx.beginPath();
                ctx.moveTo(-10, -8);
                ctx.lineTo(-25, -30);
                ctx.lineTo(10, -8);
                ctx.fill();
                ctx.beginPath();
                ctx.moveTo(-10, 8);
                ctx.lineTo(-25, 30);
                ctx.lineTo(10, 8);
                ctx.fill();
                
                // Tail
                ctx.fillStyle = '#ff6b6b';
                ctx.beginPath();
                ctx.moveTo(-35, -5);
                ctx.lineTo(-45, -20);
                ctx.lineTo(-30, -5);
                ctx.fill();
                
                // Cockpit
                ctx.fillStyle = '#2c3e50';
                ctx.beginPath();
                ctx.arc(20, 0, 8, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.restore();
                
                // Collision detection with clouds
                for (let c of clouds) {
                    let dx = plane.x - (c.x + 25);
                    let dy = plane.y - c.y;
                    if (Math.sqrt(dx*dx + dy*dy) < 45) {
                        // Game over
                        playing = false;
                        document.getElementById('menuTitle').textContent = 'Game Over! Score: ' + score;
                        document.getElementById('menuText').textContent = 'You crashed into a cloud!';
                        document.getElementById('startBtn').textContent = 'Play Again';
                        document.getElementById('menu').classList.remove('hidden');
                        break;
                    }
                }
                
                // Collision detection with stars
                for (let i = stars.length - 1; i >= 0; i--) {
                    let dx = plane.x - stars[i].x;
                    let dy = plane.y - stars[i].y;
                    if (Math.sqrt(dx*dx + dy*dy) < 30) {
                        stars.splice(i, 1);
                        score += 10;
                        document.getElementById('score').textContent = score;
                        if (score % 50 === 0) speed = Math.min(speed + 0.5, 10);
                    }
                }
            }
            
            requestAnimationFrame(loop);
        }
        
        // Start the loop
        requestAnimationFrame(loop);
    })();
    </script>
</body>
</html>
